


ARM Macro Assembler    Page 1 


    1 00000000                 THUMB
    2 00000000                 REQUIRE8
    3 00000000                 PRESERVE8
    4 00000000         
    5 00000000                 EXPORT           Ex_NVIC_Config
    6 00000000                 EXPORT           GPIO_AF_Set
    7 00000000                 EXPORT           GPIO_Set
    8 00000000                 EXPORT           MY_NVIC_Init
    9 00000000                 EXPORT           MY_NVIC_PriorityGroupConfig
   10 00000000                 EXPORT           MY_NVIC_SetVectorTable
   11 00000000                 EXPORT           Stm32_Clock_Init
   12 00000000                 EXPORT           Sys_Clock_Set
   13 00000000                 EXPORT           Sys_Soft_Reset
   14 00000000                 EXPORT           Sys_Standby
   15 00000000                 EXPORT           INTX_DISABLE
   16 00000000                 EXPORT           INTX_ENABLE
   17 00000000                 EXPORT           MSR_MSP
   18 00000000                 EXPORT           GPIO_Write
   19 00000000         
   20 00000000         ; ******************************************************
                       ************
   21 00000000         ; π¶  ƒ‹£∫Õ‚≤ø÷–∂œ≈‰÷√∫Ø ˝
   22 00000000         ;  £®÷ª’Î∂‘GPIOA~I;≤ª∞¸¿®PVD,RTC,USB_OTG,USB_HS,“‘Ã´Õ¯ªΩ
                       –—µ»£©
   23 00000000         ;
   24 00000000         ; ≤Œ   ˝£∫r3: GPIOx(0~8,¥˙±ÌGPIOA~I)
   25 00000000         ;    r0: BITx,–Ë“™ πƒ‹µƒŒª
   26 00000000         ;    r2: TRIM,¥•∑¢ƒ£ Ω,1,œ¬…˝—ÿ;2,…œΩµ—ÿ;3£¨»Œ“‚µÁ∆Ω¥•∑¢
                       
   27 00000000         ;    r5: EXTOFFSET
   28 00000000         ;
   29 00000000         ;    ∏√∫Ø ˝“ª¥Œ÷ªƒ‹≈‰÷√1∏ˆIOø⁄,∂‡∏ˆIOø⁄,–Ë∂‡¥Œµ˜”√
   30 00000000         ;    ∏√∫Ø ˝ª·◊‘∂Øø™∆Ù∂‘”¶÷–∂œ,“‘º∞∆¡±Œœﬂ       
   31 00000000         ;
   32 00000000         ; ∑µªÿ÷µ£∫Œﬁ 
   33 00000000         ; ******************************************************
                       ************
   34 00000000                 AREA             ||i.Ex_NVIC_Config||, CODE, REA
DONLY, ALIGN=2
   35 00000000         
   36 00000000         |RCC_APB2ENR|
   37 00000000 40023844        DCD              0x40023844
   38 00000004         |SYSCFG_EXTICR1|
   39 00000004 40013808        DCD              0x40013808
   40 00000008         |EXTI_IMR|
   41 00000008 40013C00        DCD              0x40013c00
   42 0000000C         
   43 0000000C         ; void Ex_NVIC_Config(u8 GPIOx,u8 BITx,u8 TRIM) 
   44 0000000C         Ex_NVIC_Config
                               PROC
   45 0000000C B5F0            PUSH             {r4-r7,lr}
   46 0000000E 4603            MOV              r3,r0       ; ªÒ»°GPIOxµƒ÷µ£¨¥Ê
                                                            ∑≈”⁄r3÷–
   47 00000010 4608            MOV              r0,r1       ; ªÒ»°BITxµƒ÷µ£¨¥Ê∑
                                                            ≈”⁄r0÷–
   48 00000012 17CD            ASRS             r5,r1,#31   ; ASRSÀ„ ı”““∆,∑˚∫≈
                                                            Œª±£¡Ù£¨◊Û∂ÀÃÓ≥‰1
   49 00000014 EB01 7595       ADD              r5,r1,r5,LSR #30 ; 
   50 00000018 10AD            ASRS             r5,r5,#2



ARM Macro Assembler    Page 2 


   51 0000001A EBA1 0585       SUB              r5,r1,r5,LSL #2
   52 0000001E 06AD            LSLS             r5,r5,#26
   53 00000020 0E2C            LSRS             r4,r5,#24
   54 00000022 F85F 0024       LDR              r0,|RCC_APB2ENR|
   55 00000026 6800            LDR              r0,[r0,#0]
   56 00000028 F440 4080       ORR              r0,r0,#0x4000
   57 0000002C F85F 5030       LDR              r5,|RCC_APB2ENR|
   58 00000030 6028            STR              r0,[r5,#0]
   59 00000032 17CD            ASRS             r5,r1,#31
   60 00000034 EB01 7595       ADD              r5,r1,r5,LSR #30
   61 00000038 10AE            ASRS             r6,r5,#2
   62 0000003A F85F 5038       LDR              r5,|SYSCFG_EXTICR1|
   63 0000003E F855 5026       LDR              r5,[r5,r6,LSL #2]
   64 00000042 260F            MOVS             r6,#0xf
   65 00000044 40A6            LSLS             r6,r6,r4
   66 00000046 43B5            BICS             r5,r5,r6
   67 00000048 4608            MOV              r0,r1
   68 0000004A 17CE            ASRS             r6,r1,#31
   69 0000004C EB01 7696       ADD              r6,r1,r6,LSR #30
   70 00000050 10B7            ASRS             r7,r6,#2
   71 00000052 F85F 6050       LDR              r6,|SYSCFG_EXTICR1|
   72 00000056 F846 5027       STR              r5,[r6,r7,LSL #2]
   73 0000005A 17CD            ASRS             r5,r1,#31
   74 0000005C EB01 7595       ADD              r5,r1,r5,LSR #30
   75 00000060 10AE            ASRS             r6,r5,#2
   76 00000062 F85F 5060       LDR              r5,|SYSCFG_EXTICR1|
   77 00000066 F855 5026       LDR              r5,[r5,r6,LSL #2]
   78 0000006A FA03 F604       LSL              r6,r3,r4
   79 0000006E 4335            ORRS             r5,r5,r6
   80 00000070 17CE            ASRS             r6,r1,#31
   81 00000072 EB01 7696       ADD              r6,r1,r6,LSR #30
   82 00000076 10B7            ASRS             r7,r6,#2
   83 00000078 F85F 6078       LDR              r6,|SYSCFG_EXTICR1|
   84 0000007C F846 5027       STR              r5,[r6,r7,LSL #2]
   85 00000080 F85F 007C       LDR              r0,|EXTI_IMR|
   86 00000084 6800            LDR              r0,[r0,#0]
   87 00000086 2501            MOVS             r5,#1
   88 00000088 408D            LSLS             r5,r5,r1
   89 0000008A 4328            ORRS             r0,r0,r5
   90 0000008C F85F 5088       LDR              r5,|EXTI_IMR|
   91 00000090 6028            STR              r0,[r5,#0]
   92 00000092 F002 0001       AND              r0,r2,#1
   93 00000096 B150            CBZ              r0,|L0.142|
   94 00000098 F85F 0094       LDR              r0,|EXTI_IMR|
   95 0000009C 300C            ADDS             r0,r0,#0xc
   96 0000009E 6800            LDR              r0,[r0,#0]
   97 000000A0 2501            MOVS             r5,#1
   98 000000A2 408D            LSLS             r5,r5,r1
   99 000000A4 4328            ORRS             r0,r0,r5
  100 000000A6 F85F 50A0       LDR              r5,|EXTI_IMR|
  101 000000AA 350C            ADDS             r5,r5,#0xc
  102 000000AC 6028            STR              r0,[r5,#0]
  103 000000AE         |L0.142|
  104 000000AE F002 0002       AND              r0,r2,#2
  105 000000B2 B150            CBZ              r0,|L0.166|
  106 000000B4 F85F 00B0       LDR              r0,|EXTI_IMR|
  107 000000B8 3008            ADDS             r0,r0,#8
  108 000000BA 6800            LDR              r0,[r0,#0]
  109 000000BC 2501            MOVS             r5,#1



ARM Macro Assembler    Page 3 


  110 000000BE 408D            LSLS             r5,r5,r1
  111 000000C0 4328            ORRS             r0,r0,r5
  112 000000C2 F85F 50BC       LDR              r5,|EXTI_IMR|
  113 000000C6 3508            ADDS             r5,r5,#8
  114 000000C8 6028            STR              r0,[r5,#0]
  115 000000CA         |L0.166|
  116 000000CA BDF0            POP              {r4-r7,pc}
  117 000000CC                 ENDP
  118 000000CC         
  119 000000CC         ; ******************************************************
                       ******************
  120 000000CC         ; π¶  ƒ‹£∫GPIO∏¥”√…Ë÷√
  121 000000CC         ;
  122 000000CC         ; ≤Œ   ˝£∫r0: GPIOx£¨¥˙±ÌGPIOA~GPIOI
  123 000000CC         ;    r1: BITx£¨0~15£¨¥˙±ÌIO“˝Ω≈±‡∫≈
  124 000000CC         ;    r2: AFx£¨0~15£¨¥˙±ÌAF0~AF15
  125 000000CC         ;    r3: GPIOx_AFRL
  126 000000CC         ;
  127 000000CC         ;    AF0:MCO/SWD/SWCLK/RTC     AF1:TIM1/TIM2;
  128 000000CC         ;    AF2:TIM3~5; AF3:TIM8~11       AF3:TIM8~11
  129 000000CC         ;    AF4:I2C1~I2C3;             AF5:SPI1/SPI2
  130 000000CC         ;    AF6:SPI3;                    AF7:USART1~3;
  131 000000CC         ;    AF8:USART4~6;             AF9;CAN1/CAN2/TIM12~14  
  132 000000CC         ;    AF10:USB_OTG/USB_HS        AF11:ETH
  133 000000CC         ;    AF12:FSMC/SDIO/OTG/HS     AF13:DCIM  
  134 000000CC         ;    AF14:                      AF15:EVENTOUT
  135 000000CC         ;
  136 000000CC         ; ∑µªÿ÷µ£∫Œﬁ
  137 000000CC         ; ******************************************************
                       ******************
  138 000000CC                 AREA             ||i.GPIO_AF_Set||, CODE, READON
LY, ALIGN=1
  139 00000000         
  140 00000000         ; void GPIO_AF_Set(GPIO_TypeDef* GPIOx,u8 BITx,u8 AFx)
  141 00000000         GPIO_AF_Set
                               PROC
  142 00000000 B530            PUSH             {r4,r5,lr}
  143 00000002 10CC            ASRS             r4,r1,#3
  144 00000004 F100 0320       ADD              r3,r0,#0x20
  145 00000008 F853 3024       LDR              r3,[r3,r4,LSL #2]
  146 0000000C 074C            LSLS             r4,r1,#29
  147 0000000E 0EE5            LSRS             r5,r4,#27
  148 00000010 240F            MOVS             r4,#0xf
  149 00000012 40AC            LSLS             r4,r4,r5
  150 00000014 43A3            BICS             r3,r3,r4
  151 00000016 10CD            ASRS             r5,r1,#3
  152 00000018 F100 0420       ADD              r4,r0,#0x20
  153 0000001C F844 3025       STR              r3,[r4,r5,LSL #2]
  154 00000020 10CC            ASRS             r4,r1,#3
  155 00000022 F100 0320       ADD              r3,r0,#0x20
  156 00000026 F853 3024       LDR              r3,[r3,r4,LSL #2]
  157 0000002A 074C            LSLS             r4,r1,#29
  158 0000002C 0EE4            LSRS             r4,r4,#27
  159 0000002E FA02 F404       LSL              r4,r2,r4
  160 00000032 4323            ORRS             r3,r3,r4
  161 00000034 10CD            ASRS             r5,r1,#3
  162 00000036 F100 0420       ADD              r4,r0,#0x20
  163 0000003A F844 3025       STR              r3,[r4,r5,LSL #2]
  164 0000003E BD30            POP              {r4,r5,pc}



ARM Macro Assembler    Page 4 


  165 00000040                 ENDP
  166 00000040         
  167 00000040         ; ******************************************************
                       *******************************
  168 00000040         ; π¶  ƒ‹£∫GPIOÕ®”√…Ë÷√
  169 00000040         ;
  170 00000040         ; ≤Œ   ˝£∫r0: GPIOx:(x = A°¢B°¢C°¢D°¢E°¢F°¢G°¢H°¢I)
  171 00000040         ;    r4: BITx,:0X0000~0XFFFF,Œª…Ë÷√,√ø∏ˆŒª¥˙±Ì“ª∏ˆIO
  172 00000040         ;    r2: MODE,0~3;ƒ£ Ω—°‘Ò,0, ‰»Î(œµÕ≥∏¥Œªƒ¨»œ◊¥Ã¨);1,∆’
                       Õ® ‰≥ˆ;2,∏¥”√π¶ƒ‹;3,ƒ£ƒ‚ ‰»Î.
  173 00000040         ;    r3: OTYPE,0/1; ‰≥ˆ¿‡–Õ—°‘Ò,0,Õ∆ÕÏ ‰≥ˆ;1,ø™¬© ‰≥ˆ.
  174 00000040         ;    r6: OSPEED,0~3; ‰≥ˆÀŸ∂»…Ë÷√,0,2Mhz;1,25Mhz;2,50Mhz;
                       3,100Mh. 
  175 00000040         ;    r7; PUPD,0~3:…œœ¬¿≠…Ë÷√,0,≤ª¥¯…œœ¬¿≠;1,…œ¿≠;2,œ¬¿≠;
                       3,±£¡Ù.
  176 00000040         ;
  177 00000040         ; ∑µªÿ÷µ£∫Œﬁ
  178 00000040         ; ******************************************************
                       ******************************
  179 00000040                 AREA             ||i.GPIO_Set||, CODE, READONLY,
 ALIGN=1
  180 00000000         
  181 00000000 00000000 
                       pinpos  EQU              0x00
  182 00000000 00000000 
                       pos     EQU              0x00
  183 00000000 00000000 
                       curpin  EQU              0x00
  184 00000000         
  185 00000000         ; void GPIO_Set(GPIO_TypeDef* GPIOx,u32 BITx,u32 MODE,u3
                       2 OTYPE,u32 OSPEED,u32 PUPD)
  186 00000000         GPIO_Set
                               PROC
  187 00000000 E92D 47F0       PUSH             {r4-r10,lr}
  188 00000004 460C            MOV              r4,r1       ; ªÒ»°BITx£¨¥Ê∑≈‘⁄r
                                                            4÷–
  189 00000006 E9DD 6708       LDRD             r6,r7,[sp,#0x20]
  190 0000000A 2100            MOVS             r1,#pinpos
  191 0000000C 2500            MOVS             r5,#pos
  192 0000000E F05F 0C00       MOVS             r12,#curpin
  193 00000012 BF00            NOP
  194 00000014 E060            B                |CMP_pinpos_16|
  195 00000016         |for|
  196 00000016 F04F 0801       MOV              r8,#1
  197 0000001A FA08 F501       LSL              r5,r8,r1    ; ÷ŒªºÏ≤È£¨posµ»”⁄
                                                            pinpos◊Û“∆“ªŒª
  198 0000001E EA04 0C05       AND              r12,r4,r5   ; ªÒ»°ƒ≥“ªŒª“˝Ω≈
  199 00000022 45AC            CMP              r12,r5      ; ºÏ≤È∏√“˝Ω≈ «∑Ò“™…
                                                            Ë÷√
  200 00000024 D157            BNE              |pinpos++|  ; »Ù∏√“˝Ω≈≤ª–Ë“™…Ë÷
                                                            √£¨‘ÚºÏ≤Èœ¬“ªŒª“˝Ω≈
                                                            
  201 00000026         ; «Â≥˝‘≠¿¥µƒMODEµƒ…Ë÷√
  202 00000026 F8D0 8000       LDR              r8,[r0,#0]  ; ªÒ»°ºƒ¥Ê∆˜GPIOx_M
                                                            ODER÷–µƒ÷µ£¨¥Ê∑≈”⁄r
                                                            8÷–,GPIOx_MODERµƒµÿ
                                                            ÷∑ª˘”⁄GPIOxµƒª˘µÿ÷∑
                                                            ∆´“∆0x00
  203 0000002A EA4F 0A41       LSL              r10,r1,#1   ; r10µ»”⁄pinpos◊Û“∆



ARM Macro Assembler    Page 5 


                                                            “ªŒª
  204 0000002E F04F 0903       MOV              r9,#3
  205 00000032 FA09 F90A       LSL              r9,r9,r10
  206 00000036 EA28 0809       BIC              r8,r8,r9    ; BIC ”Î∑«
  207 0000003A F8C0 8000       STR              r8,[r0,#0]  ; ºƒ¥Ê∆˜GPIOx_MODER
                                                            ÷––¥»Î∏¥Œª÷µ
  208 0000003E         ; …Ë÷√–¬µƒMODEµƒƒ£ Ω 
  209 0000003E F8D0 8000       LDR              r8,[r0,#0]  ; ªÒ»°ºƒ¥Ê∆˜GPIOx_M
                                                            ODERµƒ÷µ£¨¥Ê∑≈”⁄r8÷
                                                            –
  210 00000042 EA4F 0941       LSL              r9,r1,#1    ; r9µ»”⁄pinpos◊Û“∆“
                                                            ªŒª
  211 00000046 FA02 F909       LSL              r9,r2,r9    ; r2 = MODE
  212 0000004A EA48 0809       ORR              r8,r8,r9
  213 0000004E F8C0 8000       STR              r8,[r0,#0]  ; ºƒ¥Ê∆˜GPIOx_MODER
                                                            ÷––¥»Î–¬MODE÷µ
  214 00000052 2A01            CMP              r2,#1       ; ≈–∂œ «∑ÒŒ™ ‰≥ˆƒ£ 
                                                            Ω
  215 00000054 D001            BEQ              |IF_MODE_OUT/AF|
  216 00000056 2A02            CMP              r2,#2       ; ≈–∂œ «∑ÒŒ™∏¥”√ƒ£ 
                                                            Ω
  217 00000058 D127            BNE              |IF_MODE_IN|
  218 0000005A         |IF_MODE_OUT/AF|
  219 0000005A         ; «Â≥˝‘≠¿¥µƒOSPEEDRµƒ…Ë÷√
  220 0000005A F8D0 8008       LDR              r8,[r0,#8]  ; ªÒ»°ºƒ¥Ê∆˜GPIOx_O
                                                            SPEEDR÷–µƒ÷µ£¨¥Ê∑≈”
                                                            ⁄r8÷–£¨GPIOx_OSPEED
                                                            Rµƒµÿ÷∑ª˘”⁄GPIOxµƒª
                                                            ˘µÿ÷∑∆´“∆0x08
  221 0000005E EA4F 0A41       LSL              r10,r1,#1
  222 00000062 F04F 0903       MOV              r9,#3
  223 00000066 FA09 F90A       LSL              r9,r9,r10
  224 0000006A EA28 0809       BIC              r8,r8,r9
  225 0000006E F8C0 8008       STR              r8,[r0,#8]  ; ºƒ¥Ê∆˜GPIOx_OSPEE
                                                            DR÷––¥»Î∏¥Œª÷µ
  226 00000072         ; …Ë÷√–¬µƒOSPEEDR
  227 00000072 F8D0 8008       LDR              r8,[r0,#8]
  228 00000076 EA4F 0941       LSL              r9,r1,#1
  229 0000007A FA06 F909       LSL              r9,r6,r9    ; r6 = OSPEEDR
  230 0000007E EA48 0809       ORR              r8,r8,r9
  231 00000082 F8C0 8008       STR              r8,[r0,#8]  ; ºƒ¥Ê∆˜GPIOx_OSPEE
                                                            DR÷––¥»Î–¬OSPEEDR÷µ
                                                            
  232 00000086         ; «Â≥˝‘≠¿¥µƒOTYPERµƒ…Ë÷√
  233 00000086 F8D0 9004       LDR              r9,[r0,#4]  ; ªÒ»°ºƒ¥Ê∆˜GPIOx_O
                                                            TYPER÷–µƒ÷µ£¨¥Ê∑≈”⁄
                                                            r8÷–£¨GPIOx_OTYPERµ
                                                            ƒµÿ÷∑ª˘”⁄GPIOxµƒª˘µ
                                                            ÿ÷∑∆´“∆0x04
  234 0000008A F04F 0801       MOV              r8,#1
  235 0000008E FA08 F801       LSL              r8,r8,r1
  236 00000092 EA29 0908       BIC              r9,r9,r8
  237 00000096 F8C0 9004       STR              r9,[r0,#4]  ; ºƒ¥Ê∆˜GPIOx_OTYPE
                                                            R÷––¥»Î∏¥Œª÷µ
  238 0000009A         ; …Ë÷√–¬µƒOTYPER
  239 0000009A F8D0 8004       LDR              r8,[r0,#4]
  240 0000009E FA03 F901       LSL              r9,r3,r1    ; r3 = OTYPER
  241 000000A2 EA48 0809       ORR              r8,r8,r9
  242 000000A6 F8C0 8004       STR              r8,[r0,#4]  ; ºƒ¥Ê∆˜GPIOx_OTYPE



ARM Macro Assembler    Page 6 


                                                            R÷––¥»Î–¬OTYPER÷µ
  243 000000AA         |IF_MODE_IN|
  244 000000AA         ; «Â≥˝‘≠¿¥µƒPUPDRµƒ…Ë÷√
  245 000000AA F8D0 800C       LDR              r8,[r0,#0xc] ; ªÒ»°ºƒ¥Ê∆˜GPIOx_
                                                            PUPDR÷–µƒ÷µ£¨¥Ê∑≈”⁄
                                                            r8÷–,GPIOx_PUPDRµƒµ
                                                            ÿ÷∑ª˘”⁄GPIOxµƒª˘µÿ÷
                                                            ∑∆´“∆0x0c
  246 000000AE EA4F 0A41       LSL              r10,r1,#1
  247 000000B2 F04F 0903       MOV              r9,#3
  248 000000B6 FA09 F90A       LSL              r9,r9,r10
  249 000000BA EA28 0809       BIC              r8,r8,r9
  250 000000BE F8C0 800C       STR              r8,[r0,#0xc] ; ºƒ¥Ê∆˜GPIOx_OTYP
                                                            ER÷––¥»Î∏¥Œª÷µ
  251 000000C2         ; …Ë÷√–¬µƒPUPDR
  252 000000C2 F8D0 800C       LDR              r8,[r0,#0xc]
  253 000000C6 EA4F 0941       LSL              r9,r1,#1
  254 000000CA FA07 F909       LSL              r9,r7,r9    ; r7 = PUPDR
  255 000000CE EA48 0809       ORR              r8,r8,r9
  256 000000D2 F8C0 800C       STR              r8,[r0,#0xc] ; ºƒ¥Ê∆˜GPIOx_OTYP
                                                            ER÷––¥»Î–¬PUPDR÷µ
  257 000000D6         |pinpos++|
  258 000000D6 1C49            ADDS             r1,r1,#1
  259 000000D8         |CMP_pinpos_16|
  260 000000D8 2910            CMP              r1,#0x10    ; pinpos”Î16œ‡±»Ωœ
  261 000000DA D39C            BCC              |for|       ; BCC –°”⁄Ã¯◊™
  262 000000DC E8BD 87F0       POP              {r4-r10,pc}
  263 000000E0                 ENDP
  264 000000E0         
  265 000000E0         ; ******************************************************
                       *******************************
  266 000000E0         ; π¶  ƒ‹£∫GPIO ‰≥ˆ
  267 000000E0         ;
  268 000000E0         ; ≤Œ   ˝£∫r0: GPIOx:(x = A°¢B°¢C°¢D°¢E°¢F°¢G°¢H°¢I)
  269 000000E0         ;    r1: PortVal,:0X0000~0XFFFF£¨∂Àø⁄ ‰≥ˆ÷µ
  270 000000E0         ;
  271 000000E0         ; ∑µªÿ÷µ£∫Œﬁ
  272 000000E0         ; ******************************************************
                       ******************************
  273 000000E0         
  274 000000E0                 AREA             ||i.GPIO_Write||, CODE, READONL
Y, ALIGN=1
  275 00000000         
  276 00000000         ; void GPIO_Write(GPIO_TypeDef* GPIOx, uint16_t PortVal)
                       
  277 00000000         GPIO_Write
                               PROC
  278 00000000 B500            PUSH             {lr}
  279 00000002 6942            LDR              r2,[r0,#0x14]
  280 00000004 000A            MOVS             r2,r1
  281 00000006 6142            STR              r2,[r0,#0x14]
  282 00000008 BD00            POP              {pc}
  283 0000000A                 ENDP
  284 0000000A         
  285 0000000A         ; ******************************************************
                       *************************
  286 0000000A         ; π¶  ƒ‹£∫…Ë÷√NVIC 
  287 0000000A         ; 
  288 0000000A         ; ≤Œ   ˝£∫r7: NVIC_PreemptionPriority:«¿’º”≈œ»º∂



ARM Macro Assembler    Page 7 


  289 0000000A         ;    r8: NVIC_SubPriority       :œÏ”¶”≈œ»º∂
  290 0000000A         ;    r4: NVIC_Channel           :÷–∂œ±‡∫≈
  291 0000000A         ;    r5: NVIC_Group             :÷–∂œ∑÷◊È 0~4
  292 0000000A         ;    r6: temp
  293 0000000A         ;
  294 0000000A         ; ◊¢“‚”≈œ»º∂≤ªƒ‹≥¨π˝…Ë∂®µƒ◊Èµƒ∑∂Œß!∑Ò‘Úª·”–“‚œÎ≤ªµΩµƒ¥ÌŒ
                       Û
  295 0000000A         ; ◊ÈªÆ∑÷:
  296 0000000A         ; ◊È0:0Œª«¿’º”≈œ»º∂,4ŒªœÏ”¶”≈œ»º∂
  297 0000000A         ; ◊È1:1Œª«¿’º”≈œ»º∂,3ŒªœÏ”¶”≈œ»º∂
  298 0000000A         ; ◊È2:2Œª«¿’º”≈œ»º∂,2ŒªœÏ”¶”≈œ»º∂
  299 0000000A         ; ◊È3:3Œª«¿’º”≈œ»º∂,1ŒªœÏ”¶”≈œ»º∂
  300 0000000A         ; ◊È4:4Œª«¿’º”≈œ»º∂,0ŒªœÏ”¶”≈œ»º∂
  301 0000000A         ; NVIC_SubPriority∫ÕNVIC_PreemptionPriorityµƒ‘≠‘Ú «, ˝÷µ
                       ‘Ω–°,‘Ω”≈
  302 0000000A         ;
  303 0000000A         ; ∑µªÿ÷µ£∫Œﬁ
  304 0000000A         ; ******************************************************
                       *************************
  305 0000000A                 AREA             ||i.MY_NVIC_Init||, CODE, READO
NLY, ALIGN=2
  306 00000000         
  307 00000000         |SCS_BASE|
  308 00000000 E000E400        DCD              0xe000e400
  309 00000004         
  310 00000004         ; void MY_NVIC_Init(u8 NVIC_PreemptionPriority,u8 NVIC_S
                       ubPriority,u8 NVIC_Channel,u8 NVIC_Group)  
  311 00000004         MY_NVIC_Init
                               PROC
  312 00000004 E92D 41F0       PUSH             {r4-r8,lr}
  313 00000008 4607            MOV              r7,r0       ; ªÒ»°NVIC_Preempti
                                                            onPriority
  314 0000000A 4688            MOV              r8,r1       ; ªÒ»°NVIC_SubPrior
                                                            ity
  315 0000000C 4614            MOV              r4,r2       ; ªÒ»°NVIC_Channel
  316 0000000E 461D            MOV              r5,r3       ; ªÒ»°NVIC_Group
  317 00000010 4628            MOV              r0,r5
  318 00000012 F7FF FFFE       BL               MY_NVIC_PriorityGroupConfig 
                                                            ; …Ë÷√∑÷◊È
  319 00000016 F1C5 0004       RSB              r0,r5,#4    ; RSB ∑¥œÚºı∑®
  320 0000001A FA07 F600       LSL              r6,r7,r0
  321 0000001E 200F            MOVS             r0,#0xf
  322 00000020 4128            ASRS             r0,r0,r5
  323 00000022 EA00 0008       AND              r0,r0,r8
  324 00000026 4306            ORRS             r6,r6,r0
  325 00000028 F006 060F       AND              r6,r6,#0xf  ; »°µÕÀƒŒª
  326 0000002C 17E2            ASRS             r2,r4,#31
  327 0000002E EB04 62D2       ADD              r2,r4,r2,LSR #27
  328 00000032 1152            ASRS             r2,r2,#5
  329 00000034 0092            LSLS             r2,r2,#2
  330 00000036 F102 22E0       ADD              r2,r2,#0xe000e000
  331 0000003A F8D2 2100       LDR              r2,[r2,#0x100] ; NVIC_BASE
  332 0000003E 4621            MOV              r1,r4
  333 00000040 17E3            ASRS             r3,r4,#31
  334 00000042 EB04 63D3       ADD              r3,r4,r3,LSR #27
  335 00000046 115B            ASRS             r3,r3,#5
  336 00000048 EBA4 1C43       SUB              r12,r4,r3,LSL #5
  337 0000004C 2301            MOVS             r3,#1
  338 0000004E FA03 F30C       LSL              r3,r3,r12



ARM Macro Assembler    Page 8 


  339 00000052 431A            ORRS             r2,r2,r3
  340 00000054 4620            MOV              r0,r4
  341 00000056 17E3            ASRS             r3,r4,#31
  342 00000058 EB04 63D3       ADD              r3,r4,r3,LSR #27
  343 0000005C 115B            ASRS             r3,r3,#5
  344 0000005E 009B            LSLS             r3,r3,#2
  345 00000060 F103 23E0       ADD              r3,r3,#0xe000e000
  346 00000064 F8C3 2100       STR              r2,[r3,#0x100] ;  πƒ‹÷–∂œŒª(“™«
                                                            Â≥˝µƒª∞,…Ë÷√ICER∂‘”
                                                            ¶ŒªŒ™1º¥ø…)
  347 00000068 F85F 006C       LDR              r0,|SCS_BASE|
  348 0000006C 5D00            LDRB             r0,[r0,r4]
  349 0000006E EA40 1006       ORR              r0,r0,r6,LSL #4
  350 00000072 F85F 1074       LDR              r1,|SCS_BASE|
  351 00000076 5508            STRB             r0,[r1,r4]  ; …Ë÷√œÏ”¶”≈œ»º∂∫Õ«
                                                            ¿∂œ”≈œ»º∂ 
  352 00000078 E8BD 81F0       POP              {r4-r8,pc}
  353 0000007C                 ENDP
  354 0000007C         
  355 0000007C         ; ******************************************************
                       ***********************
  356 0000007C         ; π¶  ƒ‹£∫…Ë÷√NVIC∑÷◊È
  357 0000007C         ; 
  358 0000007C         ; ≤Œ   ˝£∫r1: NVIC_Group:NVIC∑÷◊È 0~4 ◊‹π≤5◊È
  359 0000007C         ;    r2: temp1
  360 0000007C         ;   r0: temp
  361 0000007C         ; 
  362 0000007C         ; ∑µªÿ÷µ£∫Œﬁ
  363 0000007C         ; ******************************************************
                       ***********************
  364 0000007C                 AREA             ||i.MY_NVIC_PriorityGroupConfig
||, CODE, READONLY, ALIGN=2
  365 00000000         
  366 00000000         |SCB_BASE|
  367 00000000 E000ED0C        DCD              0xe000ed0c
  368 00000004         |Key|
  369 00000004 05FA0000        DCD              0x05fa0000
  370 00000008         
  371 00000008         ; void MY_NVIC_PriorityGroupConfig(u8 NVIC_Group)  
  372 00000008         MY_NVIC_PriorityGroupConfig
                               PROC
  373 00000008 4601            MOV              r1,r0
  374 0000000A 2307            MOVS             r3,#7
  375 0000000C EA23 0201       BIC              r2,r3,r1    ; »°∫Û»˝Œª
  376 00000010 0212            LSLS             r2,r2,#8
  377 00000012 F85F 3014       LDR              r3,|SCB_BASE|
  378 00000016 6818            LDR              r0,[r3,#0]  ; ∂¡»°œ»«∞µƒ…Ë÷√
  379 00000018 F64F 03FF       MOV              r3,#0x0000F8FF
  380 0000001C 4018            ANDS             r0,r0,r3    ; «Âø’œ»«∞∑÷◊È
  381 0000001E F85F 301C       LDR              r3,|Key|
  382 00000022 4318            ORRS             r0,r0,r3    ; –¥»Î‘ø≥◊
  383 00000024 4310            ORRS             r0,r0,r2
  384 00000026 F85F 3028       LDR              r3,|SCB_BASE|
  385 0000002A 6018            STR              r0,[r3,#0]  ; …Ë÷√∑÷◊È   
  386 0000002C 4770            BX               lr
  387 0000002E                 ENDP
  388 0000002E         
  389 0000002E         ; ******************************************************
                       **********************



ARM Macro Assembler    Page 9 


  390 0000002E         ; π¶  ƒ‹£∫…Ë÷√œÚ¡ø±Ì∆´“∆µÿ÷∑
  391 0000002E         ;
  392 0000002E         ; ≤Œ   ˝£∫r0: NVIC_VectTab:ª˘÷∑
  393 0000002E         ;    r1: Offset:∆´“∆¡ø 
  394 0000002E         ; 
  395 0000002E         ; ∑µªÿ÷µ£∫Œﬁ
  396 0000002E         ; ******************************************************
                       **********************
  397 0000002E                 AREA             ||i.MY_NVIC_SetVectorTable||, C
ODE, READONLY, ALIGN=2
  398 00000000         
  399 00000000         |SCB_VTOR|
  400 00000000 E000ED08        DCD              0xe000ed08
  401 00000004         
  402 00000004         ; void MY_NVIC_SetVectorTable(u32 NVIC_VectTab,u32 Offse
                       t) 
  403 00000004         MY_NVIC_SetVectorTable
                               PROC
  404 00000004 0A4A            LSRS             r2,r1,#9
  405 00000006 0252            LSLS             r2,r2,#9
  406 00000008 4302            ORRS             r2,r2,r0    ; VTORµÕ9Œª±£¡Ù,º¥[
                                                            8:0]±£¡Ù°£
  407 0000000A F85F 300C       LDR              r3,|SCB_VTOR|
  408 0000000E 601A            STR              r2,[r3,#0]  ; …Ë÷√NVICµƒœÚ¡ø±Ì∆
                                                            ´“∆ºƒ¥Ê∆˜
  409 00000010 4770            BX               lr
  410 00000012                 ENDP
  411 00000012         
  412 00000012         ; ******************************************************
                       **********************
  413 00000012         ; π¶  ƒ‹£∫œµÕ≥ ±÷”≥ı ºªØ∫Ø ˝
  414 00000012         ;
  415 00000012         ; ≤Œ   ˝£∫r4: plln:÷˜PLL±∂∆µœµ ˝(PLL±∂∆µ),»°÷µ∑∂Œß:64~43
                       2.
  416 00000012         ;    r5: pllm:÷˜PLL∫Õ“Ù∆µPLL∑÷∆µœµ ˝(PLL÷Æ«∞µƒ∑÷∆µ),»°÷µ
                       ∑∂Œß:2~63.
  417 00000012         ;    r6: pllp:œµÕ≥ ±÷”µƒ÷˜PLL∑÷∆µœµ ˝(PLL÷Æ∫Ûµƒ∑÷∆µ),»°÷
                       µ∑∂Œß:2,4,6,8.(Ωˆœﬁ’‚4∏ˆ÷µ!)
  418 00000012         ;    r7: pllq:USB/SDIO/ÀÊª˙ ˝≤˙…˙∆˜µ»µƒ÷˜PLL∑÷∆µœµ ˝(PLL
                       ÷Æ∫Ûµƒ∑÷∆µ),»°÷µ∑∂Œß:2~15.
  419 00000012         ;
  420 00000012         ; ∑µªÿ÷µ£∫Œﬁ
  421 00000012         ; ******************************************************
                       **********************
  422 00000012                 AREA             ||i.Stm32_Clock_Init||, CODE, R
EADONLY, ALIGN=2
  423 00000000         
  424 00000000         |RCC_BASE|
  425 00000000 40023800        DCD              0x40023800
  426 00000004         |ReSet_HSEON_CSSON_PLLON|
  427 00000004 FEF6FFFF        DCD              0xfef6ffff
  428 00000008         |ReSet_RCC_PLLCFGR|
  429 00000008 24003010        DCD              0x24003010
  430 0000000C         
  431 0000000C         ; void Stm32_Clock_Init(u32 plln,u32 pllm,u32 pllp,u32 p
                       llq)
  432 0000000C         Stm32_Clock_Init
                               PROC
  433 0000000C B5F0            PUSH             {r4-r7,lr}



ARM Macro Assembler    Page 10 


  434 0000000E 4604            MOV              r4,r0
  435 00000010 460D            MOV              r5,r1
  436 00000012 4616            MOV              r6,r2
  437 00000014 461F            MOV              r7,r3
  438 00000016 F85F 0018       LDR              r0,|RCC_BASE|
  439 0000001A 6800            LDR              r0,[r0,#0]
  440 0000001C F040 0001       ORR              r0,r0,#0x00000001
  441 00000020 F85F 1024       LDR              r1,|RCC_BASE|
  442 00000024 6008            STR              r0,[r1,#0]  ; …Ë÷√HISON,ø™∆Ùƒ⁄≤
                                                            ø∏ﬂÀŸRC’Òµ¥
  443 00000026 2000            MOVS             r0,#0x00000000
  444 00000028 F85F 102C       LDR              r1,|RCC_BASE|
  445 0000002C 3108            ADDS             r1,r1,#8
  446 0000002E 6008            STR              r0,[r1,#0]  ; CFGR«Â¡„
  447 00000030 F85F 0034       LDR              r0,|RCC_BASE|
  448 00000034 6800            LDR              r0,[r0,#0]
  449 00000036 F85F 1034       LDR              r1,|ReSet_HSEON_CSSON_PLLON| ; 
                                                            HSEON,CSSON,PLLON«Â
                                                            ¡„ 
  450 0000003A 4008            ANDS             r0,r0,r1
  451 0000003C F85F 1040       LDR              r1,|RCC_BASE|
  452 00000040 6008            STR              r0,[r1,#0]
  453 00000042 F85F 003C       LDR              r0,|ReSet_RCC_PLLCFGR| ; PLLCFG
                                                            Rª÷∏¥∏¥Œª÷µ 
  454 00000046 1D09            ADDS             r1,r1,#4
  455 00000048 6008            STR              r0,[r1,#0]
  456 0000004A 1F08            SUBS             r0,r1,#4
  457 0000004C 6800            LDR              r0,[r0,#0]
  458 0000004E F420 2080       BIC              r0,r0,#0x40000 ; HSEBYP«Â¡„,Õ‚≤
                                                            øæß’Ò≤ª≈‘¬∑
  459 00000052 1F09            SUBS             r1,r1,#4
  460 00000054 6008            STR              r0,[r1,#0]
  461 00000056 2000            MOVS             r0,#0x00000000
  462 00000058 F85F 105C       LDR              r1,|RCC_BASE|
  463 0000005C 310C            ADDS             r1,r1,#0xc
  464 0000005E 6008            STR              r0,[r1,#0]  ; Ω˚÷πRCC ±÷”÷–∂œ 
  465 00000060 463B            MOV              r3,r7
  466 00000062 4632            MOV              r2,r6
  467 00000064 4629            MOV              r1,r5
  468 00000066 4620            MOV              r0,r4
  469 00000068 F7FF FFFE       BL               Sys_Clock_Set ; …Ë÷√ ±÷” 
  470 0000006C 2100            MOVS             r1,#0
  471 0000006E 4608            MOV              r0,r1
  472 00000070 F7FF FFFE       BL               MY_NVIC_SetVectorTable 
                                                            ; ≈‰÷√œÚ¡ø±Ì
  473 00000074 BDF0            POP              {r4-r7,pc}
  474 00000076                 ENDP
  475 00000076         
  476 00000076         ; ******************************************************
                       **********************
  477 00000076         ; π¶  ƒ‹£∫ ±÷”…Ë÷√∫Ø ˝
  478 00000076         ; 
  479 00000076         ; ≤Œ   ˝£∫Fvco=Fs*(plln/pllm);
  480 00000076         ;    Fsys=Fvco/pllp=Fs*(plln/(pllm*pllp))
  481 00000076         ;    Fusb=Fvco/pllq=Fs*(plln/(pllm*pllq))
  482 00000076         ;    Fvco:VCO∆µ¬ 
  483 00000076         ;    Fsys:œµÕ≥ ±÷”∆µ¬ 
  484 00000076         ;    Fusb:USB,SDIO,RNGµ»µƒ ±÷”∆µ¬ 
  485 00000076         ;    Fs:PLL ‰»Î ±÷”∆µ¬ ,ø…“‘ «HSI,HSEµ». 



ARM Macro Assembler    Page 11 


  486 00000076         ;    
  487 00000076         ;    r4: plln:÷˜PLL±∂∆µœµ ˝(PLL±∂∆µ),»°÷µ∑∂Œß:64~432.
  488 00000076         ;    r5: pllm:÷˜PLL∫Õ“Ù∆µPLL∑÷∆µœµ ˝(PLL÷Æ«∞µƒ∑÷∆µ),»°÷µ
                       ∑∂Œß:2~63.
  489 00000076         ;    r2: pllp:œµÕ≥ ±÷”µƒ÷˜PLL∑÷∆µœµ ˝(PLL÷Æ∫Ûµƒ∑÷∆µ),»°÷
                       µ∑∂Œß:2,4,6,8.(Ωˆœﬁ’‚4∏ˆ÷µ!)
  490 00000076         ;    r3: pllq:USB/SDIO/ÀÊª˙ ˝≤˙…˙∆˜µ»µƒ÷˜PLL∑÷∆µœµ ˝(PLL
                       ÷Æ∫Ûµƒ∑÷∆µ),»°÷µ∑∂Œß:2~15.
  491 00000076         ;    r1: retry
  492 00000076         ;    r0: status
  493 00000076         ;
  494 00000076         ; Õ‚≤øæß’ÒŒ™8Mµƒ ±∫Ú,Õ∆ºˆ÷µ£∫plln=336,pllm=25,pllp=2,pll
                       q=7.
  495 00000076         ;       µ√µΩ£∫Fvco=25*(336/25)=336Mhz
  496 00000076         ;               Fsys=336/2=168Mhz
  497 00000076         ;           Fusb=336/7=48Mhz
  498 00000076         ; ∑µªÿ÷µ£∫0,≥…π¶;1, ß∞‹°£
  499 00000076         ; ******************************************************
                       **********************
  500 00000076                 AREA             ||i.Sys_Clock_Set||, CODE, READ
ONLY, ALIGN=2
  501 00000000         
  502 00000000         ;|RCC_BASE|
  503 00000000         ;DCD      0x40023800
  504 00000000         |PWR_BASE|
  505 00000000 40007000        DCD              0x40007000
  506 00000004         |FLASH_R_BASE|
  507 00000004 40023C00        DCD              0x40023c00
  508 00000008         
  509 00000008         ; u8 Sys_Clock_Set(u32 plln,u32 pllm,u32 pllp,u32 pllq)
  510 00000008         Sys_Clock_Set
                               PROC
  511 00000008 B5F0            PUSH             {r4-r7,lr}
  512 0000000A 4604            MOV              r4,r0
  513 0000000C 460D            MOV              r5,r1
  514 0000000E 2100            MOVS             r1,#0
  515 00000010 2000            MOVS             r0,#0
  516 00000012 F85F 6004       LDR              r6,|RCC_BASE|
  517 00000016 6836            LDR              r6,[r6,#0]  ; RCC_CR
  518 00000018 F446 3680       ORR              r6,r6,#0x10000
  519 0000001C F85F 7004       LDR              r7,|RCC_BASE|
  520 00000020 603E            STR              r6,[r7,#0]  ; HSE ø™∆Ù 
  521 00000022 E001            B                |while_HSE RDY|
  522 00000024         |retry++|
  523 00000024 1C4E            ADDS             r6,r1,#1
  524 00000026 B2B1            UXTH             r1,r6
  525 00000028         |while_HSE
                               RDY|                         ; µ»¥˝HSE RDY
  526 00000028 F85F 6004       LDR              r6,|RCC_BASE|
  527 0000002C 6836            LDR              r6,[r6,#0]
  528 0000002E F406 3600       AND              r6,r6,#0x20000
  529 00000032 B91E            CBNZ             r6,|if_HSE_UNABLE_READY|
  530 00000034 F641 76FF       MOV              r6,#0x1fff
  531 00000038 42B1            CMP              r1,r6
  532 0000003A DBF3            BLT              |retry++|
  533 0000003C         |if_HSE_UNABLE_READY|
  534 0000003C F641 76FF       MOV              r6,#0x1fff
  535 00000040 42B1            CMP              r1,r6
  536 00000042 D101            BNE              |HSE_READY|



ARM Macro Assembler    Page 12 


  537 00000044 2001            MOVS             r0,#1       ; HSEŒﬁ∑®æÕ–˜,statu
                                                            s=1
  538 00000046 E06F            B                |return|
  539 00000048         |HSE_READY|
  540 00000048 F85F 6004       LDR              r6,|RCC_BASE|
  541 0000004C 3640            ADDS             r6,r6,#0x40
  542 0000004E 6836            LDR              r6,[r6,#0]
  543 00000050 F046 5680       ORR              r6,r6,#0x10000000
  544 00000054 F85F 7004       LDR              r7,|RCC_BASE|
  545 00000058 3740            ADDS             r7,r7,#0x40
  546 0000005A 603E            STR              r6,[r7,#0]  ; µÁ‘¥Ω”ø⁄ ±÷” πƒ‹
  547 0000005C F85F 6060       LDR              r6,|PWR_BASE|
  548 00000060 6836            LDR              r6,[r6,#0]
  549 00000062 F446 4640       ORR              r6,r6,#0xc000
  550 00000066 F85F 7068       LDR              r7,|PWR_BASE|
  551 0000006A 603E            STR              r6,[r7,#0]  ; ∏ﬂ–‘ƒ‹ƒ£ Ω, ±÷”ø…
                                                            µΩ168Mhz
  552 0000006C F85F 6004       LDR              r6,|RCC_BASE|
  553 00000070 3608            ADDS             r6,r6,#8
  554 00000072 6836            LDR              r6,[r6,#0]
  555 00000074 F446 4614       ORR              r6,r6,#0x9400
  556 00000078 F85F 7004       LDR              r7,|RCC_BASE|
  557 0000007C 3708            ADDS             r7,r7,#8
  558 0000007E 603E            STR              r6,[r7,#0]  ; HCLK ≤ª∑÷∆µ;APB1 
                                                            4∑÷∆µ;APB2 2∑÷∆µ. 
  559 00000080 F85F 6004       LDR              r6,|RCC_BASE|
  560 00000084 6836            LDR              r6,[r6,#0]
  561 00000086 F026 7680       BIC              r6,r6,#0x1000000
  562 0000008A F85F 7004       LDR              r7,|RCC_BASE|
  563 0000008E 603E            STR              r6,[r7,#0]  ; πÿ±’÷˜PLL
  564 00000090 EA45 1684       ORR              r6,r5,r4,LSL #6
  565 00000094 2701            MOVS             r7,#1
  566 00000096 EBC7 0752       RSB              r7,r7,r2,LSR #1
  567 0000009A EA46 4607       ORR              r6,r6,r7,LSL #16
  568 0000009E EA46 6603       ORR              r6,r6,r3,LSL #24
  569 000000A2 F446 0680       ORR              r6,r6,#0x400000
  570 000000A6 F85F 7004       LDR              r7,|RCC_BASE|
  571 000000AA 1D3F            ADDS             r7,r7,#4
  572 000000AC 603E            STR              r6,[r7,#0]  ; ≈‰÷√÷˜PLL,PLL ±÷”
                                                            ‘¥¿¥◊‘HSE
  573 000000AE 1F3E            SUBS             r6,r7,#4
  574 000000B0 6836            LDR              r6,[r6,#0]
  575 000000B2 F046 7680       ORR              r6,r6,#0x1000000
  576 000000B6 1F3F            SUBS             r7,r7,#4
  577 000000B8 603E            STR              r6,[r7,#0]  ; ¥Úø™÷˜PLL
  578 000000BA BF00            NOP
  579 000000BC         |while_PLL_READY|
  580 000000BC F85F 6004       LDR              r6,|RCC_BASE|
  581 000000C0 6836            LDR              r6,[r6,#0]
  582 000000C2 F006 7600       AND              r6,r6,#0x2000000
  583 000000C6 2E00            CMP              r6,#0
  584 000000C8 D0F8            BEQ              |while_PLL_READY| 
                                                            ; µ»¥˝PLL◊º±∏∫√ 
  585 000000CA F85F 60C8       LDR              r6,|FLASH_R_BASE|
  586 000000CE 6836            LDR              r6,[r6,#0]
  587 000000D0 F446 7680       ORR              r6,r6,#0x100
  588 000000D4 F85F 70D4       LDR              r7,|FLASH_R_BASE|
  589 000000D8 603E            STR              r6,[r7,#0]  ; ÷∏¡Ó‘§»° πƒ‹.
  590 000000DA 463E            MOV              r6,r7



ARM Macro Assembler    Page 13 


  591 000000DC 6836            LDR              r6,[r6,#0]
  592 000000DE F446 7600       ORR              r6,r6,#0x200
  593 000000E2 603E            STR              r6,[r7,#0]  ; ÷∏¡Ócache πƒ‹.
  594 000000E4 463E            MOV              r6,r7
  595 000000E6 6836            LDR              r6,[r6,#0]
  596 000000E8 F446 6680       ORR              r6,r6,#0x400
  597 000000EC 603E            STR              r6,[r7,#0]  ;  ˝æ›cache πƒ‹.
  598 000000EE 463E            MOV              r6,r7
  599 000000F0 6836            LDR              r6,[r6,#0]
  600 000000F2 F046 0605       ORR              r6,r6,#5
  601 000000F6 603E            STR              r6,[r7,#0]  ; 5∏ˆCPUµ»¥˝÷‹∆⁄. 
  602 000000F8 F85F 6004       LDR              r6,|RCC_BASE|
  603 000000FC 3608            ADDS             r6,r6,#8
  604 000000FE 6836            LDR              r6,[r6,#0]
  605 00000100 F026 0603       BIC              r6,r6,#3
  606 00000104 F85F 7004       LDR              r7,|RCC_BASE|
  607 00000108 3708            ADDS             r7,r7,#8
  608 0000010A 603E            STR              r6,[r7,#0]  ; «Â¡„
  609 0000010C 463E            MOV              r6,r7
  610 0000010E 6836            LDR              r6,[r6,#0]
  611 00000110 F046 0602       ORR              r6,r6,#2
  612 00000114 603E            STR              r6,[r7,#0]  ; —°‘Ò÷˜PLL◊˜Œ™œµÕ≥
                                                             ±÷” 
  613 00000116 BF00            NOP
  614 00000118         |while_PLL_SET_SUCCESS|
  615 00000118 F85F 6004       LDR              r6,|RCC_BASE|
  616 0000011C 3608            ADDS             r6,r6,#8
  617 0000011E 6836            LDR              r6,[r6,#0]
  618 00000120 F006 060C       AND              r6,r6,#0xc
  619 00000124 2E08            CMP              r6,#8
  620 00000126 D1F7            BNE              |while_PLL_SET_SUCCESS| ; µ»¥˝÷
                                                            ˜PLL◊˜Œ™œµÕ≥ ±÷”≥…π
                                                            ¶. 
  621 00000128         |return|
  622 00000128 BDF0            POP              {r4-r7,pc}
  623 0000012A                 ENDP
  624 0000012A         
  625 0000012A         ; ******************************************************
                       **********************
  626 0000012A         ; π¶  ƒ‹£∫œµÕ≥»Ì∏¥Œª   
  627 0000012A         ; 
  628 0000012A         ; ≤Œ   ˝£∫Œﬁ
  629 0000012A         ; 
  630 0000012A         ; ∑µªÿ÷µ£∫Œﬁ
  631 0000012A         ; ******************************************************
                       **********************
  632 0000012A                 AREA             ||i.Sys_Soft_Reset||, CODE, REA
DONLY, ALIGN=2
  633 00000000         
  634 00000000         |ReSet_data|
  635 00000000 05FA0004        DCD              0x05fa0004
  636 00000004         |SCB_AIRCR|
  637 00000004 E000ED0C        DCD              0xe000ed0c
  638 00000008         
  639 00000008         ; void Sys_Soft_Reset(void)
  640 00000008         Sys_Soft_Reset
                               PROC
  641 00000008 F85F 000C       LDR              r0,|ReSet_data|
  642 0000000C F85F 100C       LDR              r1,|SCB_AIRCR|



ARM Macro Assembler    Page 14 


  643 00000010 6008            STR              r0,[r1,#0]
  644 00000012 4770            BX               lr
  645 00000014                 ENDP
  646 00000014         
  647 00000014         ; ******************************************************
                       **********************
  648 00000014         ; π¶  ƒ‹£∫œµΩ¯»Î¥˝ª˙ƒ£ Ω 
  649 00000014         ; 
  650 00000014         ; ≤Œ   ˝£∫Œﬁ
  651 00000014         ; 
  652 00000014         ; ∑µªÿ÷µ£∫Œﬁ
  653 00000014         ; ******************************************************
                       **********************
  654 00000014                 AREA             ||i.Sys_Standby||, CODE, READON
LY, ALIGN=2
  655 00000000         
  656 00000000         |SCB_SCR|
  657 00000000 E000ED10        DCD              0xe000ed10
  658 00000004         |RCC_APB1ENR|
  659 00000004 40023840        DCD              0x40023840
  660 00000008         ;|PWR_BASE|
  661 00000008         ;DCD      0x40007000
  662 00000008         
  663 00000008         ; void Sys_Standby(void)
  664 00000008         Sys_Standby
                               PROC
  665 00000008 B510            PUSH             {r4,lr}
  666 0000000A F85F 000C       LDR              r0,|SCB_SCR|
  667 0000000E 6800            LDR              r0,[r0,#0]
  668 00000010 F040 0004       ORR              r0,r0,#4
  669 00000014 F85F 1018       LDR              r1,|SCB_SCR|
  670 00000018 6008            STR              r0,[r1,#0]  ;  πƒ‹SLEEPDEEPŒª (
                                                            SYS->CTRL)
  671 0000001A F85F 0018       LDR              r0,|RCC_APB1ENR|
  672 0000001E 6800            LDR              r0,[r0,#0]
  673 00000020 F040 5080       ORR              r0,r0,#0x10000000
  674 00000024 F85F 1024       LDR              r1,|RCC_APB1ENR|
  675 00000028 6008            STR              r0,[r1,#0]  ;  πƒ‹µÁ‘¥ ±÷” 
  676 0000002A F85F 0004       LDR              r0,|PWR_BASE|
  677 0000002E 6840            LDR              r0,[r0,#4]  ; PWR_CSR
  678 00000030 F440 7080       ORR              r0,r0,#0x100
  679 00000034 F85F 1004       LDR              r1,|PWR_BASE|
  680 00000038 6048            STR              r0,[r1,#4]  ; …Ë÷√WKUP”√”⁄ªΩ–—
  681 0000003A 4608            MOV              r0,r1
  682 0000003C 6800            LDR              r0,[r0,#0]  ; PWR_CR
  683 0000003E F040 0004       ORR              r0,r0,#4
  684 00000042 6008            STR              r0,[r1,#0]  ; «Â≥˝Wake-up ±Í÷æ
  685 00000044 4608            MOV              r0,r1
  686 00000046 6800            LDR              r0,[r0,#0]  ; PWR_CR
  687 00000048 F040 0002       ORR              r0,r0,#2
  688 0000004C 6008            STR              r0,[r1,#0]  ; PDDS÷√Œª    
  689 0000004E F7FF FFFE       BL               WFI_SET     ; ÷¥––WFI÷∏¡Ó,Ω¯»Î¥
                                                            ˝ª˙ƒ£ Ω
  690 00000052 BD10            POP              {r4,pc}
  691 00000054                 ENDP
  692 00000054         
  693 00000054         ; ******************************************************
                       **********************
  694 00000054         ; π¶  ƒ‹£∫÷¥––ª„±‡÷∏¡ÓWFI  



ARM Macro Assembler    Page 15 


  695 00000054         ;
  696 00000054         ; ≤Œ   ˝£∫Œﬁ
  697 00000054         ;
  698 00000054         ; ∑µªÿ÷µ£∫Œﬁ
  699 00000054         ; ******************************************************
                       **********************
  700 00000054                 AREA             ||.emb_text||, CODE
  701 00000000         
  702 00000000         ; void WFI_SET(void)
  703 00000000         WFI_SET PROC
  704 00000000 BF30            WFI
  705 00000002         
  706 00000002                 ENDP
  707 00000002         
  708 00000002         ; ******************************************************
                       **********************
  709 00000002         ; π¶  ƒ‹£∫πÿ±’À˘”–÷–∂œ(µ´ «≤ª∞¸¿®fault∫ÕNMI÷–∂œ)
  710 00000002         ;
  711 00000002         ; ≤Œ   ˝£∫Œﬁ
  712 00000002         ;
  713 00000002         ; ∑µªÿ÷µ£∫Œﬁ
  714 00000002         ; ******************************************************
                       **********************
  715 00000002                 AREA             ||.emb_text||, CODE
  716 00000002         
  717 00000002         ; void INTX_DISABLE(void)
  718 00000002         INTX_DISABLE
                               PROC
  719 00000002 B672            CPSID            I
  720 00000004 4770            BX               LR
  721 00000006         
  722 00000006                 ENDP
  723 00000006         
  724 00000006         ; ******************************************************
                       **********************
  725 00000006         ; π¶  ƒ‹£∫ø™∆ÙÀ˘”–÷–∂œ
  726 00000006         ;
  727 00000006         ; ≤Œ   ˝£∫Œﬁ
  728 00000006         ;
  729 00000006         ; ∑µªÿ÷µ£∫Œﬁ
  730 00000006         ; ******************************************************
                       **********************
  731 00000006                 AREA             ||.emb_text||, CODE
  732 00000006         
  733 00000006         ; void INTX_ENABLE(void)
  734 00000006         INTX_ENABLE
                               PROC
  735 00000006 B662            CPSIE            I
  736 00000008 4770            BX               LR
  737 0000000A         
  738 0000000A                 ENDP
  739 0000000A         
  740 0000000A         ; ******************************************************
                       **********************
  741 0000000A         ; π¶  ƒ‹£∫…Ë÷√’ª∂•µÿ÷∑
  742 0000000A         ;
  743 0000000A         ; ≤Œ   ˝£∫addr:’ª∂•µÿ÷∑
  744 0000000A         ;
  745 0000000A         ; ∑µªÿ÷µ£∫Œﬁ



ARM Macro Assembler    Page 16 


  746 0000000A         ; ******************************************************
                       **********************
  747 0000000A                 AREA             ||.emb_text||, CODE
  748 0000000A         
  749 0000000A         ; void MSR_MSP(u32 addr) 
  750 0000000A         MSR_MSP PROC
  751 0000000A F380 8808       MSR              MSP, r0     ; set Main Stack va
                                                            lue
  752 0000000E 4770            BX               r14
  753 00000010         
  754 00000010                 ENDP
  755 00000010         
  756 00000010                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\sys.d -o.\sys.o -I.\RTE\_Target_1 -I"F:\STM32\Keil5 MDK\ARM\P
ACK\Keil\STM32F4xx_DFP\1.0.8\Device\Include" -I"F:\STM32\Keil5 MDK\ARM\CMSIS\In
clude" --predefine="__UVISION_VERSION SETA 524" --predefine="STM32F40_41xxx SET
A 1" --list=..\obj\sys.lst ..\SYSTEM\sys.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

EXTI_IMR 00000008

Symbol: EXTI_IMR
   Definitions
      At line 40 in file ..\SYSTEM\sys.s
   Uses
      At line 85 in file ..\SYSTEM\sys.s
      At line 90 in file ..\SYSTEM\sys.s
      At line 94 in file ..\SYSTEM\sys.s
      At line 100 in file ..\SYSTEM\sys.s
      At line 106 in file ..\SYSTEM\sys.s
      At line 112 in file ..\SYSTEM\sys.s

Ex_NVIC_Config 0000000C

Symbol: Ex_NVIC_Config
   Definitions
      At line 44 in file ..\SYSTEM\sys.s
   Uses
      At line 5 in file ..\SYSTEM\sys.s
Comment: Ex_NVIC_Config used once
L0.142 000000AE

Symbol: L0.142
   Definitions
      At line 103 in file ..\SYSTEM\sys.s
   Uses
      At line 93 in file ..\SYSTEM\sys.s
Comment: L0.142 used once
L0.166 000000CA

Symbol: L0.166
   Definitions
      At line 115 in file ..\SYSTEM\sys.s
   Uses
      At line 105 in file ..\SYSTEM\sys.s
Comment: L0.166 used once
RCC_APB2ENR 00000000

Symbol: RCC_APB2ENR
   Definitions
      At line 36 in file ..\SYSTEM\sys.s
   Uses
      At line 54 in file ..\SYSTEM\sys.s
      At line 57 in file ..\SYSTEM\sys.s

SYSCFG_EXTICR1 00000004

Symbol: SYSCFG_EXTICR1
   Definitions
      At line 38 in file ..\SYSTEM\sys.s
   Uses
      At line 62 in file ..\SYSTEM\sys.s
      At line 71 in file ..\SYSTEM\sys.s
      At line 76 in file ..\SYSTEM\sys.s
      At line 83 in file ..\SYSTEM\sys.s

|i.Ex_NVIC_Config| 00000000




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: |i.Ex_NVIC_Config|
   Definitions
      At line 34 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.Ex_NVIC_Config| unused
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

GPIO_AF_Set 00000000

Symbol: GPIO_AF_Set
   Definitions
      At line 141 in file ..\SYSTEM\sys.s
   Uses
      At line 6 in file ..\SYSTEM\sys.s
Comment: GPIO_AF_Set used once
|i.GPIO_AF_Set| 00000000

Symbol: |i.GPIO_AF_Set|
   Definitions
      At line 138 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.GPIO_AF_Set| unused
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CMP_pinpos_16 000000D8

Symbol: CMP_pinpos_16
   Definitions
      At line 259 in file ..\SYSTEM\sys.s
   Uses
      At line 194 in file ..\SYSTEM\sys.s
Comment: CMP_pinpos_16 used once
GPIO_Set 00000000

Symbol: GPIO_Set
   Definitions
      At line 186 in file ..\SYSTEM\sys.s
   Uses
      At line 7 in file ..\SYSTEM\sys.s
Comment: GPIO_Set used once
IF_MODE_IN 000000AA

Symbol: IF_MODE_IN
   Definitions
      At line 243 in file ..\SYSTEM\sys.s
   Uses
      At line 217 in file ..\SYSTEM\sys.s
Comment: IF_MODE_IN used once
IF_MODE_OUT/AF 0000005A

Symbol: IF_MODE_OUT/AF
   Definitions
      At line 218 in file ..\SYSTEM\sys.s
   Uses
      At line 215 in file ..\SYSTEM\sys.s
Comment: IF_MODE_OUT/AF used once
for 00000016

Symbol: for
   Definitions
      At line 195 in file ..\SYSTEM\sys.s
   Uses
      At line 261 in file ..\SYSTEM\sys.s
Comment: for used once
pinpos++ 000000D6

Symbol: pinpos++
   Definitions
      At line 257 in file ..\SYSTEM\sys.s
   Uses
      At line 200 in file ..\SYSTEM\sys.s
Comment: pinpos++ used once
|i.GPIO_Set| 00000000

Symbol: |i.GPIO_Set|
   Definitions
      At line 179 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.GPIO_Set| unused
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

GPIO_Write 00000000

Symbol: GPIO_Write
   Definitions
      At line 277 in file ..\SYSTEM\sys.s
   Uses
      At line 18 in file ..\SYSTEM\sys.s
Comment: GPIO_Write used once
|i.GPIO_Write| 00000000

Symbol: |i.GPIO_Write|
   Definitions
      At line 274 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.GPIO_Write| unused
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

MY_NVIC_Init 00000004

Symbol: MY_NVIC_Init
   Definitions
      At line 311 in file ..\SYSTEM\sys.s
   Uses
      At line 8 in file ..\SYSTEM\sys.s
Comment: MY_NVIC_Init used once
SCS_BASE 00000000

Symbol: SCS_BASE
   Definitions
      At line 307 in file ..\SYSTEM\sys.s
   Uses
      At line 347 in file ..\SYSTEM\sys.s
      At line 350 in file ..\SYSTEM\sys.s

|i.MY_NVIC_Init| 00000000

Symbol: |i.MY_NVIC_Init|
   Definitions
      At line 305 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.MY_NVIC_Init| unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Key 00000004

Symbol: Key
   Definitions
      At line 368 in file ..\SYSTEM\sys.s
   Uses
      At line 381 in file ..\SYSTEM\sys.s
Comment: Key used once
MY_NVIC_PriorityGroupConfig 00000008

Symbol: MY_NVIC_PriorityGroupConfig
   Definitions
      At line 372 in file ..\SYSTEM\sys.s
   Uses
      At line 9 in file ..\SYSTEM\sys.s
      At line 318 in file ..\SYSTEM\sys.s

SCB_BASE 00000000

Symbol: SCB_BASE
   Definitions
      At line 366 in file ..\SYSTEM\sys.s
   Uses
      At line 377 in file ..\SYSTEM\sys.s
      At line 384 in file ..\SYSTEM\sys.s

|i.MY_NVIC_PriorityGroupConfig| 00000000

Symbol: |i.MY_NVIC_PriorityGroupConfig|
   Definitions
      At line 364 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.MY_NVIC_PriorityGroupConfig| unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

MY_NVIC_SetVectorTable 00000004

Symbol: MY_NVIC_SetVectorTable
   Definitions
      At line 403 in file ..\SYSTEM\sys.s
   Uses
      At line 10 in file ..\SYSTEM\sys.s
      At line 472 in file ..\SYSTEM\sys.s

SCB_VTOR 00000000

Symbol: SCB_VTOR
   Definitions
      At line 399 in file ..\SYSTEM\sys.s
   Uses
      At line 407 in file ..\SYSTEM\sys.s
Comment: SCB_VTOR used once
|i.MY_NVIC_SetVectorTable| 00000000

Symbol: |i.MY_NVIC_SetVectorTable|
   Definitions
      At line 397 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.MY_NVIC_SetVectorTable| unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

RCC_BASE 00000000

Symbol: RCC_BASE
   Definitions
      At line 424 in file ..\SYSTEM\sys.s
   Uses
      At line 438 in file ..\SYSTEM\sys.s
      At line 441 in file ..\SYSTEM\sys.s
      At line 444 in file ..\SYSTEM\sys.s
      At line 447 in file ..\SYSTEM\sys.s
      At line 451 in file ..\SYSTEM\sys.s
      At line 462 in file ..\SYSTEM\sys.s
      At line 516 in file ..\SYSTEM\sys.s
      At line 519 in file ..\SYSTEM\sys.s
      At line 526 in file ..\SYSTEM\sys.s
      At line 540 in file ..\SYSTEM\sys.s
      At line 544 in file ..\SYSTEM\sys.s
      At line 552 in file ..\SYSTEM\sys.s
      At line 556 in file ..\SYSTEM\sys.s
      At line 559 in file ..\SYSTEM\sys.s
      At line 562 in file ..\SYSTEM\sys.s
      At line 570 in file ..\SYSTEM\sys.s
      At line 580 in file ..\SYSTEM\sys.s
      At line 602 in file ..\SYSTEM\sys.s
      At line 606 in file ..\SYSTEM\sys.s
      At line 615 in file ..\SYSTEM\sys.s

ReSet_HSEON_CSSON_PLLON 00000004

Symbol: ReSet_HSEON_CSSON_PLLON
   Definitions
      At line 426 in file ..\SYSTEM\sys.s
   Uses
      At line 449 in file ..\SYSTEM\sys.s
Comment: ReSet_HSEON_CSSON_PLLON used once
ReSet_RCC_PLLCFGR 00000008

Symbol: ReSet_RCC_PLLCFGR
   Definitions
      At line 428 in file ..\SYSTEM\sys.s
   Uses
      At line 453 in file ..\SYSTEM\sys.s
Comment: ReSet_RCC_PLLCFGR used once
Stm32_Clock_Init 0000000C

Symbol: Stm32_Clock_Init
   Definitions
      At line 432 in file ..\SYSTEM\sys.s
   Uses
      At line 11 in file ..\SYSTEM\sys.s
Comment: Stm32_Clock_Init used once
|i.Stm32_Clock_Init| 00000000

Symbol: |i.Stm32_Clock_Init|
   Definitions
      At line 422 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.Stm32_Clock_Init| unused



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

FLASH_R_BASE 00000004

Symbol: FLASH_R_BASE
   Definitions
      At line 506 in file ..\SYSTEM\sys.s
   Uses
      At line 585 in file ..\SYSTEM\sys.s
      At line 588 in file ..\SYSTEM\sys.s

HSE_READY 00000048

Symbol: HSE_READY
   Definitions
      At line 539 in file ..\SYSTEM\sys.s
   Uses
      At line 536 in file ..\SYSTEM\sys.s
Comment: HSE_READY used once
PWR_BASE 00000000

Symbol: PWR_BASE
   Definitions
      At line 504 in file ..\SYSTEM\sys.s
   Uses
      At line 547 in file ..\SYSTEM\sys.s
      At line 550 in file ..\SYSTEM\sys.s
      At line 676 in file ..\SYSTEM\sys.s
      At line 679 in file ..\SYSTEM\sys.s

Sys_Clock_Set 00000008

Symbol: Sys_Clock_Set
   Definitions
      At line 510 in file ..\SYSTEM\sys.s
   Uses
      At line 12 in file ..\SYSTEM\sys.s
      At line 469 in file ..\SYSTEM\sys.s

if_HSE_UNABLE_READY 0000003C

Symbol: if_HSE_UNABLE_READY
   Definitions
      At line 533 in file ..\SYSTEM\sys.s
   Uses
      At line 529 in file ..\SYSTEM\sys.s
Comment: if_HSE_UNABLE_READY used once
retry++ 00000024

Symbol: retry++
   Definitions
      At line 522 in file ..\SYSTEM\sys.s
   Uses
      At line 532 in file ..\SYSTEM\sys.s
Comment: retry++ used once
return 00000128

Symbol: return
   Definitions
      At line 621 in file ..\SYSTEM\sys.s
   Uses



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 538 in file ..\SYSTEM\sys.s
Comment: return used once
while_HSE RDY 00000028

Symbol: while_HSE RDY
   Definitions
      At line 525 in file ..\SYSTEM\sys.s
   Uses
      At line 521 in file ..\SYSTEM\sys.s
Comment: while_HSE RDY used once
while_PLL_READY 000000BC

Symbol: while_PLL_READY
   Definitions
      At line 579 in file ..\SYSTEM\sys.s
   Uses
      At line 584 in file ..\SYSTEM\sys.s
Comment: while_PLL_READY used once
while_PLL_SET_SUCCESS 00000118

Symbol: while_PLL_SET_SUCCESS
   Definitions
      At line 614 in file ..\SYSTEM\sys.s
   Uses
      At line 620 in file ..\SYSTEM\sys.s
Comment: while_PLL_SET_SUCCESS used once
|i.Sys_Clock_Set| 00000000

Symbol: |i.Sys_Clock_Set|
   Definitions
      At line 500 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.Sys_Clock_Set| unused
11 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

ReSet_data 00000000

Symbol: ReSet_data
   Definitions
      At line 634 in file ..\SYSTEM\sys.s
   Uses
      At line 641 in file ..\SYSTEM\sys.s
Comment: ReSet_data used once
SCB_AIRCR 00000004

Symbol: SCB_AIRCR
   Definitions
      At line 636 in file ..\SYSTEM\sys.s
   Uses
      At line 642 in file ..\SYSTEM\sys.s
Comment: SCB_AIRCR used once
Sys_Soft_Reset 00000008

Symbol: Sys_Soft_Reset
   Definitions
      At line 640 in file ..\SYSTEM\sys.s
   Uses
      At line 13 in file ..\SYSTEM\sys.s
Comment: Sys_Soft_Reset used once
|i.Sys_Soft_Reset| 00000000

Symbol: |i.Sys_Soft_Reset|
   Definitions
      At line 632 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.Sys_Soft_Reset| unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

RCC_APB1ENR 00000004

Symbol: RCC_APB1ENR
   Definitions
      At line 658 in file ..\SYSTEM\sys.s
   Uses
      At line 671 in file ..\SYSTEM\sys.s
      At line 674 in file ..\SYSTEM\sys.s

SCB_SCR 00000000

Symbol: SCB_SCR
   Definitions
      At line 656 in file ..\SYSTEM\sys.s
   Uses
      At line 666 in file ..\SYSTEM\sys.s
      At line 669 in file ..\SYSTEM\sys.s

Sys_Standby 00000008

Symbol: Sys_Standby
   Definitions
      At line 664 in file ..\SYSTEM\sys.s
   Uses
      At line 14 in file ..\SYSTEM\sys.s
Comment: Sys_Standby used once
|i.Sys_Standby| 00000000

Symbol: |i.Sys_Standby|
   Definitions
      At line 654 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |i.Sys_Standby| unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

INTX_DISABLE 00000002

Symbol: INTX_DISABLE
   Definitions
      At line 718 in file ..\SYSTEM\sys.s
   Uses
      At line 15 in file ..\SYSTEM\sys.s
Comment: INTX_DISABLE used once
INTX_ENABLE 00000006

Symbol: INTX_ENABLE
   Definitions
      At line 734 in file ..\SYSTEM\sys.s
   Uses
      At line 16 in file ..\SYSTEM\sys.s
Comment: INTX_ENABLE used once
MSR_MSP 0000000A

Symbol: MSR_MSP
   Definitions
      At line 750 in file ..\SYSTEM\sys.s
   Uses
      At line 17 in file ..\SYSTEM\sys.s
Comment: MSR_MSP used once
WFI_SET 00000000

Symbol: WFI_SET
   Definitions
      At line 703 in file ..\SYSTEM\sys.s
   Uses
      At line 689 in file ..\SYSTEM\sys.s
Comment: WFI_SET used once
|.emb_text| 00000000

Symbol: |.emb_text|
   Definitions
      At line 700 in file ..\SYSTEM\sys.s
   Uses
      None
Comment: |.emb_text| unused
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

curpin 00000000

Symbol: curpin
   Definitions
      At line 183 in file ..\SYSTEM\sys.s
   Uses
      At line 192 in file ..\SYSTEM\sys.s
Comment: curpin used once
pinpos 00000000

Symbol: pinpos
   Definitions
      At line 181 in file ..\SYSTEM\sys.s
   Uses
      At line 190 in file ..\SYSTEM\sys.s
Comment: pinpos used once
pos 00000000

Symbol: pos
   Definitions
      At line 182 in file ..\SYSTEM\sys.s
   Uses
      At line 191 in file ..\SYSTEM\sys.s
Comment: pos used once
3 symbols
393 symbols in table
